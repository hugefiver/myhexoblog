---
title: 学宝虚拟机调教日记（五）
date: 2019-03-14 20:17:27
categories:
    - 日常
    - 随便写写
tags:
    - 日常
    - 学宝虚拟机
toc: true
---

最近真正的给学宝虚拟机装上了Linux，写一篇记录一下。

<!-- more -->

## 日常的前言

最近实在受不了WindowsXP这个古董系统，以及在虚拟化的WindowsXP（32位）下装vbox来用上Linux了。所以打算装上Linux。

徐学长之前写了一篇教在Windows中使用Debian的安装器 for Windows来安装Debian的博文来的。结果最后总是会出错。不得已就想了一个比较曲线救国的方法。

## 事前准备

首先，通过学宝自带的`spice`协议进入虚拟机。

需要记录你的ip地址备用。

然后准备好以下材料:

1. Arch的安装镜像iso文件（其他的应该也可以，我就用Arch来举例）
2. Debian的网络安装工具（叫做 `win32-loader`）
3. 本人预处理的一些文件[下载][1]，可以简化一些步骤（有了这个就不需要上一个东西了）

## 安装步骤

### 解压Arch镜像

将Arch镜像直接释放到D盘的根目录。**注意是根目录，外面不要再增加一层目录了。**

然后把D盘的盘符改成`arch`。

### 【分支选项】下载 _2_ 或 _3_

#### 下载了 _2_

1. 双击`win32-loader`，无脑下一步。**注意最后让你重启的时候暂时不要重启。**

2. 把`D:\arch\boot\x86_64\`下的两个文件复制到C盘根目录。

3. 修改`C:\win32-loader\grub.cfg`为以下内容:

```pain
linux /vmlinuz archisobasedir=arch archisolabel=arch
initrd /archiso.img
boot
```

1. 在`C:\boot.ini`最后添加:

```pain
C:\g2ldr.mbr="安装Arch"
```

#### 下载了 _3_

把压缩包的东西都复制到C盘根目录。

在`C:\boot.ini`最后添加:

```pain
C:\g2ldr.mbr="安装Arch"
```

### 安装Arch

在Windows的开始菜单中选择重启，在启动时会有一个系统选择界面。选择`安装Arch`。

然后就会进入Arch的live system。

![Arch](https://i.loli.net/2019/03/14/5c8a4fc61ade2.png)

之后根据Arch Wiki的guide或者任意一篇看着靠谱的博文安装Arch即可。

### Arch安装小贴士

* 磁道千万条，安全第一条。格盘不规范，关机两行泪。

* 记得设置DNS哦。（也许ip也需要设置成静态的）

* 请使用国内源，例如清华或者科大的。

* 别忘了安装grub（arch wiki好像没写来的）

## 鸣谢

感谢Shansing大佬写的一篇博文，要不然真的不知道还能在没有安装介质的情况下装成Linux: <https://shansing.com/read/461/>

[1]: https://resource.rurilove.moe/DownLoad/linux_install.7z