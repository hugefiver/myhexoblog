---
title: 学宝虚拟机调教日记（三）
date: 2018-06-15 19:18:34
categories:
	- 日常
	- 随便写写
tags:
	- 日常
	- 学宝虚拟机
toc: true
---

距本系列的（二）时隔...两个多月了吧。终于我还是决定写这篇。这两个月莫名搞出来很多玩法~~（就是没好好地完成作业）~~，尤其是某学长告诉我虚拟机竟然可以连上外网的时候（但是我的内心是卧槽的）。这意味着玩法瞬间增多 ~~，同时本系列第二篇是干啥的（...）不过还是可以使用逆向设计的~~  。
<!-- more -->

**滥用警告：本文涉及对公共资源的滥用，所有的操作均为了资源用途多样性的探索，请勿模仿！请珍惜公共资源，在尊重自己和他人的权益前提下使用。**

**首先声明，本文仅为记录我发现的玩法，并不是教程！所有操作都是以两个月前的我能看懂为基准的。**

> **中国有句古话，叫——闷声发大财。**
> 
> 我本来是不打算分享的，但是吧，又觉得不好。犹豫再三，我还是决定写这篇文章了。

### 前言
我是一名Linux操作系统使用者，虽然电脑上也装有Windows 8（非正版）和Windows 10（预装系统），但极少使用Windows（除了星际争霸2启动的时候）。但是有些软件只发布Windows版、找不到Linux平台的替代而且不能使用wine运行，这时候就不得不切换到Windows环境了。本系列第一篇中应当有一句（如果没有可能是我的记忆出现了偏差）：“虽然虚拟机不太好用，但好歹也提供了一个win环境啊”就是这个意思。

起初，是打算使用虚拟机运行迅雷来下载`Aria`和`Axel`不能下载的资源的（比如某itellyou站的ed2k链接，还有迅雷自己的链接~~，虽说只是将原始链接进行base64编码，但原始链接大多在迅雷以外的软件是没有下载速度的~~）。要下载当然需要连接外网啦，所以就诞生了本系列的第二篇。后来学长告诉我虚拟机可以连上外网，emmm，好吧，第二篇的价值不存在的。

再说说虚拟机本身吧。虽然是没有独立的外网ip，但内网的ip倒是固定的。所以内网建站成为可能。说起来，两个月前我确实是在内网建了本站的镜像来着。不过现在已经换成了一个文件下载站（[内网进](http://10.64.219.124)），本文后面会提到。

然后将以上的"下载"和"网站"二者联系起来，便成为了一个有离线下载+高速拉取功能的离线下载机。（顺带一提，虚拟机外网速度特别快。speedtest测速稳定在50Mb以上，有时候能上200Mb）

另外还有一些操作，比如利用虚拟机做代理中转，大概就是第二篇文章的逆向操作（其实那篇文章才是名副其实的逆向，当时我能想到这种操作现在想想都觉得不可思议）。这样就可以不在终端设备上装多余的软件就进行代理了。

然后我最近还搭了个MC的服务器2333，几个同学一起玩mc性能竟然占用不是很多，为了避免数据丢失，过一段时间备个份。（话说理论上D盘在我们毕业之前不会清空来着~~，感觉毕业之后也不会清，我的D盘还留着学长/学姐做的工程~~）

### 文件下载站
这个就不多说了。我是直接用的Nginx的的`AutoIndex`功能。当然，你如果想的话用`WAMP`+`HAi5`或者其他的PHP软件（？）的话也可以。甚至于还可以直接用微软自家的WebServer（好像是叫ISS吧）。

*吐个槽喵：*
*话说啊，Windows （XP）这个GBK编码真的坑爹。我的Nginx不管编码设置为GBK还是UTF-8，PATH出现中文都会出错。出现中文的路径，URL就会被编码（我不知道是哪种编码）。访问的时候就会来个500，Nginx的log显示错误大概是~~Nginx不能识别混合的编码（?）~~。而且如果直接在地址栏输入**完整的中文**路径名竟然不会出错，真是奇怪。据说Apache没有这种情况？反正我尽量避免使用中文路径吧。如果有大佬知道怎么解决麻烦告诉我。*

### 离线下载
这个就更简单了。迅雷，会装不？直接把迅雷下载的路径调成Nginx网站根目录以下就行了。

另外有一点，就是学校给我们分配的D盘太小了（毕竟学宝虚拟机本来也就是给我们交作业的而已，谁能想到会有人滥用的啊）。所以我的下载目录放在了C盘（随便卸载一些软件就腾出来大量的空间，反正重置一下也会回来的）。而我的网站当然不会放在C盘啦。那么怎么把下载目录链接到网站根目录呢。别告诉我快捷方式，Windows的快捷方式本质只是一个存有特殊内容的文件。这时候就需要硬链接（？）了。类似与Linux的`ln`命令，Windows（7 and later)有这样的工具`mklink`。不过XP的是`linkd`，而且需要自己下载。用这个工具将任意一个目录链接到另一个目录下了。（类似于[这个网站](http://10.64.219.124)的`xunlei`目录）

结合之前的web服务器就能在下载完成后拿取文件了。如果是视频，还能就和视频播放器在线播放，毕竟内网网速有保障。

**下载后请及时删除文件，避免给学校服务器造成过多的负担。**要是影响到同学们选课就不好了。（手动滑稽

### 写（hu）在（yan）后（luan）面（语）
首先，前面提到过，虚拟机能连内网的机器是看脸的。外网也是同理。

怎么看能不能连内外网呢？

- 内网：先通过学宝登录进虚拟机查看虚拟机的ip。在本地ping虚拟机。
- 外网：方案有2。
	1. 先找一个能用ip访问的的网站（比如baidu）。确定它的ip（使用nslookup、ping等），然后在虚拟机访问。
	2. 直接改虚拟机的DNS（例如`114.114.114.114` `8.8.8.8`之类的），然后尝试访问网页。

如果能访问，改个dns就行了。

本来还打算试下用`rclone`把`onedrive`挂载到虚拟机的。不过它依赖`fuse`在Windows的一个实现，这个软件的话最低只支持到Windows 7，emmm。

Windows搭建代理？试试Project V吧。虚拟机出口真的快。

Chrome支持XP的最后一个版本是49.x。迅雷极速版蛮好用的。

最后
**闷声发大财，且行且珍惜。**